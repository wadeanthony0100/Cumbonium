<!DOCTYPE html>
<html lang="en">
<head>
    <script src="//code.jquery.com/jquery-2.1.4.min.js"></script>
    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
    <meta charset="UTF-8">
    <title>Memes</title>
</head>
<body>
    <div class="col-md-6 col-md-offset-3">
        <h1>Hello world</h1>

        <div class="panel panel-default">
            <div id="output-chat" class="panel-body">
            </div>
            <div class="panel-footer">
                <input id="input-chat" type="text" class="form-control">
            </div>
        </div>
    </div>
</body>
<footer>
    <script>
        document.addEventListener("DOMContentLoaded", function(event) {
            update();
        });
        $("#input-chat").keyup(function(event) {
            if(event.keyCode == 13){
                push($("#input-chat").val());
                $("#input-chat").val("");
            }
        });
        function push(text) {
            var data = {
                input: text
            };
            var xhr = new XMLHttpRequest();
            xhr.open("POST", "/text", true);
            xhr.setRequestHeader("Content-type", "application/json");
            xhr.onload = function(event) {
                document.getElementById("output-chat").innerHTML = xhr.responseText;
            };
//            console.log(JSON.stringify(data));
            xhr.send(JSON.stringify(data));
        }
        function update() {
            var xhr = new XMLHttpRequest();
            xhr.open("GET", "/text", true);
            xhr.onload = function(event) {
                document.getElementById("output-chat").innerHTML = xhr.responseText;
            };
            xhr.send();
        }
    </script>
</footer>
</html>